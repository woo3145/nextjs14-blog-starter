---
id: 6
title: 오픈소스 - flutter_vertical_heatmap 배포
description: vertical 스크롤 방식의 heatmap이 pub.dev에 존재하지 않아 직접 개발하고, 다른 패키지의 이슈탭에서 필요로 하는 분들이 보여 정제 후 배포하였습니다. 품질을 측정하는 pub.dev 스코어 140/140을 기록했습니다.
period: '2024-05-10 ~ ing'
image: https://d2quahb2ygxiv.cloudfront.net/a9849fb3a9d6b6b274e81.png
tags:
  - text: 개인
    color: zinc
  - text: Flutter
    color: blue
  - text: Open-source
    color: green
published: true
featured: true
links:
  github: https://github.com/woo3145/flutter_vertical_heatmap
  homepage: https://pub.dev/packages/flutter_vertical_heatmap
---

## Link

- [Github](https://github.com/woo3145/flutter_vertical_heatmap)
- [pub.dev](https://pub.dev/packages/flutter_vertical_heatmap)

## Purpose

`Flutter` 앱을 개발하면서 `vertical`한 `heatmap`을 찾지 못해 아래와 같은 위젯을 개발했습니다.

<div className="w-1/3 mx-auto pt-8">
  ![alt
  text](https://d2quahb2ygxiv.cloudfront.net/fb3a9d6b6b274e813f183.png?width=1200&height=1200)
</div>

여러 `heatmap`의 이슈에서 저처럼 `vertical` 스크롤 기능을 원하는 분들도 보이고, `pub.dev`의 생태계가 궁금하기도 해서 `오픈소스`로 배포하기로 마음을 먹었습니다.

또하나의 노림수로 `npm`은 `100만개 이상의 많은 라이브러리`가 있는 반면 `pub.dev`의 패키지는 `4만개 정도`이기에 검색 첫페이지 상위권에 랭크되어 홍보없이 실제 유저들이 찾아 사용할 것 같았습니다.

그래서 실제 배포 후 불과 몇시간만에 사용자들이 생겼고 하루만에 `flutter heatmap` 검색어 4위, `heatmap` 검색어 6위에 위치하게 되었습니다.

추가로 배포전 `pub.dev`의 규정을 꼼꼼히 파악하여 `스코어 140/140`을 기록했습니다.

<div className="w-full flex items-center justify-center my-4 gap-4 rounded-md">
  <div>
    ![alt
    text](https://d2quahb2ygxiv.cloudfront.net/9849fb3a9d6b6b274e813.png?width=1200&height=1200)
  </div>
  <div>
    ![alt
    text](https://d2quahb2ygxiv.cloudfront.net/9fb3a9d6b6b274e813f18.png?width=1200&height=1200)
  </div>
</div>

## Info

### 기간

2024.5.10 - v1.0.0 배포

### 스택

- Dart v3.3.4
- Flutter v1.1.7

## Feature

아래와 같이 1번부터 Bottom-up 방식으로 개발을 진행했습니다.

1. 한 칸을 표시하는 `HeatMapCell` - background/selected color, margin, radius 등 UI 요소와 기능을 위한 onTap, dateTime을 받아 onTap(dateTime)으로 실행하는 기능

2. 한 줄을 표시하는 `HeatMapRow` - 시작일과 표시할 칸 수를 받아 적절하게 cells과 emptySpaces를 표시하고 monthText를 선택적으로 받아 월을 표시

3. 히트맵 전체를 렌더링하는 `HeatMap` - 시작일과 마지막일을 받아 7개씩 split하고 1일이 포함되면 monthText를 포함시켜 `HeatMapRow` List를 만든 후 배열을 렌더링

4. 컬러를 표시하는 `colorTip`과 주를 표시하는 `weekText`

5. 이후 `HeatMap`에서 `datasets`과 `colorsets`을 받고 `value`를 통해 `colorsets`에서 적절한 색을 선택해 반환하는 `유틸함수`를 통해 컬러 표시

6. 외부에서 커스텀을 위해 `weekLabel`과 `monthLabel`, `colorTipLabel`을 주입하여 확장성 개선

7. 오픈 소스를 위해 `꼼꼼한 주석`, `CHANGELOG`, `README`, `EXAMPLE` 제작

### 다양한 커스터마이징

<div className="w-full flex items-center justify-center my-4 gap-4 rounded-md">
  <div>
    ![alt
    text](https://d2quahb2ygxiv.cloudfront.net/49fb3a9d6b6b274e813f1.png?width=300&height=1200)
  </div>
  <div>
    ![alt
    text](https://d2quahb2ygxiv.cloudfront.net/849fb3a9d6b6b274e813f.png?width=300&height=1200)
  </div>
</div>

```dart
HeatMap(
  startDate: HeatMapUtils.oneYearBefore(DateTime.now()), // 히트맵 시작일 (1년전 DateTime을 반환하는 유틸함수 제공)
  endDate: DateTime.now(), // 히트맵 마지막일 (보통 현재 날짜)
  monthLabel: HeatMapDefault.monthLabel, // ["1월", "2월" ...]
  weekLabel: HeatMapDefault.weekLabel, // ["일", "월", "화" ...]
  datasets: { // Map<DateTime, int> 형식
    [DateTime(2024, 05, 10)] = 1,
  },
  size: 32, // cell 크기
  colorTipSize: 20, // colorTip 크기
  margin: const EdgeInsets.all(3), // cell간 간격
  colorsets: { // Map<int, Color> 형식
    1: Colors.green.shade100,
    3: Colors.green.shade300,
    5: Colors.green.shade500,
    7: Colors.green.shade700,
  },
  colorTipLabel: const ["1~3", "3~5", "5~7", "7+"],
  onClick: (value) {
    // 스낵바 메세지
    ScaffoldMessenger.of(context).clearSnackBars();
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text('${value.toString()} - ${datasets[value]}'),
      ),
    );
  },
),
```

## What I learned

이 프로젝트를 통해 오픈소스 개발에 대한 경험을 쌓을 수 있었습니다.

기존에는 오픈소스의 코드적인 부분만 보았지만, 직접 개발을 위해 오픈소스들을 분석하다보니 `직관성/확장성 고려`, `깔끔한 주석`, `이슈 생성부터 개발 및 버전업을 위한 과정` 등 훨씬 넓어진 시야를 가지게 되었습니다.

해당 경험을 바탕으로 깃허브 커뮤니티 속에서 다양한 개발자들과 소통하고 협업하기위한 첫 발판을 마련한 것 같습니다. 🔥
